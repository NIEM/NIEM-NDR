
.PHONY: default
default:
	@printf 'Bravely doing nothing. Use target "help" for more info.\n'

.PHONY: help
help:
	@printf 'Targets:\n'
	@printf '  rules: build the rules schematron files\n'
	@printf '  html: build HTML rendering of the NDR doc\n'
	@printf '  text: build text rendering of the NDR doc\n'
	@printf '  clean: remove lots of automatically-built stuff\n'
	@printf '  distclean: remove all automatically-built stuff\n'

m4_dnl # PASS_THROUGH( $target )
m4_define([[[PASS_THROUGH]]],[[[.PHONY: $1
$1:
	$(MAKE) -f dependent.mk $1
]]])m4_dnl

PASS_THROUGH(all)
PASS_THROUGH(archive)
PASS_THROUGH(depend)
PASS_THROUGH(diff)
PASS_THROUGH(docs)
PASS_THROUGH(html)
PASS_THROUGH(list)
PASS_THROUGH(map)
PASS_THROUGH(rules)
PASS_THROUGH(text)
PASS_THROUGH(valid)
PASS_THROUGH(ref)
PASS_THROUGH(ext)
PASS_THROUGH(ins)
PASS_THROUGH(set)
PASS_THROUGH(docs-local)
PASS_THROUGH(v1)

.PHONY: clean
clean:
	'CONFIG_RM_COMMAND' -rf tmp tests/common/tmp
	find . -type d -name '.DS_Store' -print0 | xargs -0 'CONFIG_RM_COMMAND' -rf
	find . -name '*~' -print0 | xargs -0 'CONFIG_RM_COMMAND' -f

.PHONY: distclean
distclean: clean
	'CONFIG_RM_COMMAND' -f CONFIG_PRODUCTS

update:
	$(MAKE) all
	$(MAKE) -C tools put-current-ndr

